-- =====================================
-- HYDRA HUB - FULL STABLE SCRIPT
-- =====================================

-- Rayfield Hub Init
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "HydraHub Universal Script",
   Icon = 12534106835,
   LoadingTitle = "HydraHub",
   LoadingSubtitle = "by Hydra",
   ShowText = "HydraHub",
   Theme = "Amethyst",
   ToggleUIKeybind = "M",
   DisableRayfieldPrompts = false,
   DisableBuildWarnings = false,
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "HydraHubFolder",
      FileName = "HydraHubV5"
   },
   Discord = {
      Enabled = true,
      Invite = "vXyrruAY7h",
      RememberJoins = true
   },
   KeySystem = false,
}) 
------------------------------
-- Services & Player
------------------------------
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")
local Lighting = game:GetService("Lighting")
local player = Players.LocalPlayer



------------------------------
-- MAIN TAB
------------------------------
local MainTab = Window:CreateTab("üåê Main", nil)
local PlayerSection = MainTab:CreateSection("Player Scripts")

-- Character helpers
local function getHumanoid()
	local char = player.Character or player.CharacterAdded:Wait()
	return char:WaitForChild("Humanoid")
end

local humanoid = getHumanoid()
local hrp = player.Character:WaitForChild("HumanoidRootPart")
------------------------------
-- üéí ITEM GIVER (WIMPLY BASED)
------------------------------
local ItemTab = Window:CreateTab("üéí Item Giver", nil)
local ItemSection = ItemTab:CreateSection("Haritadaki E≈üyalarƒ± Al")

local selectedItem = nil
local toolDropdown

-- üîç Haritadaki Toollarƒ± Tarama Fonksiyonu
local function getTools()
    local tools = {}
    for _, item in pairs(game.Workspace:GetDescendants()) do
        if item:IsA("Tool") then
            -- Aynƒ± isimde birden fazla varsa listeyi kirletme
            if not table.find(tools, item.Name) then
                table.insert(tools, item.Name)
            end
        end
    end
    return tools
end

-- üì• E≈üyayƒ± Oyuncuya Verme Fonksiyonu
local function giveTool(toolName)
    local tool = game.Workspace:FindFirstChild(toolName, true)
    
    if tool and tool:IsA("Tool") then
        local toolClone = tool:Clone()
        toolClone.Parent = game:GetService("Players").LocalPlayer.Backpack
        Rayfield:Notify({Title = "Ba≈üarƒ±lƒ±", Content = "‚úÖ " .. toolName .. " ba≈üarƒ±yla alƒ±ndƒ±!", Duration = 5})
    else
        Rayfield:Notify({Title = "Hata", Content = "‚ùå E≈üya bulunamadƒ±: " .. toolName, Duration = 5})
    end
end

-- üîÑ Listeyi Yenileme Butonu
ItemTab:CreateButton({
   Name = "E≈üya Listesini Yenile üîÑ",
   Callback = function()
       local tools = getTools()
       if toolDropdown then
           toolDropdown:Set(tools) -- Dropdown'u yeni verilerle g√ºnceller
       end
       Rayfield:Notify({Title = "Yenilendi", Content = "üîÑ " .. #tools .. " adet e≈üya bulundu.", Duration = 3})
   end,
})

-- üõ†Ô∏è E≈üya Se√ßme Dropdown (A√ßƒ±lƒ±r Men√º)
toolDropdown = ItemTab:CreateDropdown({
   Name = "E≈üya Se√ß",
   Options = getTools(),
   CurrentOption = "",
   MultipleOptions = false,
   Flag = "ToolSelectDropdown", 
   Callback = function(Option)
       selectedItem = Option[1]
   end,
})

-- üéÅ Se√ßili E≈üyayƒ± Ver Butonu
ItemTab:CreateButton({
   Name = "Se√ßili E≈üyayƒ± Kendine Ver üì•",
   Callback = function()
       if selectedItem and selectedItem ~= "" then
           giveTool(selectedItem)
       else
           Rayfield:Notify({Title = "Uyarƒ±", Content = "‚ö†Ô∏è L√ºtfen √∂nce bir e≈üya se√ßin!", Duration = 3})
       end
   end,
})
------------------------------
-- Walk Speed / Jump Boost
------------------------------
_G.WalkSpeed = 16
_G.JumpPower = 50

player.CharacterAdded:Connect(function()
	humanoid = getHumanoid()
	humanoid.WalkSpeed = _G.WalkSpeed
	humanoid.JumpPower = _G.JumpPower
end)

MainTab:CreateSlider({
	Name = "Walk Speed",
	Range = {8, 100},
	Increment = 1,
	CurrentValue = _G.WalkSpeed,
	Flag = "WalkSpeedSlider",
	Callback = function(v)
		_G.WalkSpeed = v
		humanoid.WalkSpeed = v
	end
})

MainTab:CreateSlider({
	Name = "Jump Boost",
	Range = {50, 200},
	Increment = 5,
	CurrentValue = _G.JumpPower,
	Flag = "JumpBoostSlider",
	Callback = function(v)
		_G.JumpPower = v
		humanoid.JumpPower = v
	end
})

------------------------------
-- Fly / Noclip
------------------------------

local flying = false
local flySpeed = 50
local keysPressed = {}
local flyBodyVelocity
local flyConnection

UserInputService.InputBegan:Connect(function(input, gp)
	if gp then return end
	keysPressed[input.KeyCode] = true
end)

UserInputService.InputEnded:Connect(function(input)
	keysPressed[input.KeyCode] = nil
end)

local function getFlyVelocity()
	local cam = Workspace.CurrentCamera
	local move = Vector3.zero

	if keysPressed[Enum.KeyCode.W] then move += cam.CFrame.LookVector end
	if keysPressed[Enum.KeyCode.S] then move -= cam.CFrame.LookVector end
	if keysPressed[Enum.KeyCode.A] then move -= cam.CFrame.RightVector end
	if keysPressed[Enum.KeyCode.D] then move += cam.CFrame.RightVector end
	if keysPressed[Enum.KeyCode.Space] then move += Vector3.new(0,1,0) end
	if keysPressed[Enum.KeyCode.LeftShift] then move -= Vector3.new(0,1,0) end

	if move.Magnitude > 0 then
		move = move.Unit * flySpeed
	end
	return move
end

local function toggleFly()
	local char = player.Character or player.CharacterAdded:Wait()
	local hrp = char:WaitForChild("HumanoidRootPart")

	flying = not flying
	if flying then
		flyBodyVelocity = Instance.new("BodyVelocity")
		flyBodyVelocity.MaxForce = Vector3.new(1e6,1e6,1e6)
		flyBodyVelocity.Velocity = Vector3.zero
		flyBodyVelocity.Parent = hrp

		flyConnection = RunService.RenderStepped:Connect(function()
			flyBodyVelocity.Velocity = getFlyVelocity()
		end)
	else
		if flyConnection then flyConnection:Disconnect() end
		if flyBodyVelocity then flyBodyVelocity:Destroy() end
	end
end

MainTab:CreateToggle({
	Name = "Fly",
	Callback = toggleFly
})

MainTab:CreateSlider({
	Name = "Fly Speed",
	Range = {10, 200},
	Increment = 5,
	CurrentValue = flySpeed,
	Flag = "FlySpeedSlider",
	Callback = function(v)
		flySpeed = v
	end
})

-- Noclip
local noclipping = false
local noclipConnection

local function toggleNoclip()
	local char = player.Character or player.CharacterAdded:Wait()
	noclipping = not noclipping

	if noclipping then
		noclipConnection = RunService.Stepped:Connect(function()
			for _, part in pairs(char:GetDescendants()) do
				if part:IsA("BasePart") then
					part.CanCollide = false
					part.Anchored = false
				end
			end
		end)
	else
		if noclipConnection then noclipConnection:Disconnect() end
		for _, part in pairs(char:GetDescendants()) do
			if part:IsA("BasePart") then
				part.CanCollide = true
			end
		end
	end
end

MainTab:CreateToggle({
	Name = "Noclip",
	Callback = toggleNoclip
})
------------------------------
-- Give ƒ∞tem
------------------------------
   
------------------------------
-- üé≠ TROLL SEKMESƒ∞ (Geli≈ümi≈ü)
------------------------------
local TrollTab = Window:CreateTab("üé≠ Troll", nil)
local TrollSection = TrollTab:CreateSection("Eƒülence ve Sabotaj")

-- 1. Kurban Giri≈üi
TrollTab:CreateInput({
   Name = "Kurban Kullanƒ±cƒ± Adƒ± üéØ",
   PlaceholderText = "ƒ∞sim yazƒ±n...",
   RemoveTextAfterFocusLost = false,
   Callback = function(Text)
       BangTarget = Text
       LPTarget = Text
   end,
})

-- 2. Loop TP + Bang (Kopma Yapmaz)
TrollTab:CreateToggle({
    Name = "Loop TP + Bang üîû",
    CurrentValue = false,
    Flag = "TrollBang",
    Callback = function(v)
        BangActive = v
        local char = player.Character
        if not v then
            if bangTrack then bangTrack:Stop() end
            if bangLoop then bangLoop:Disconnect() end
            return
        end
        
        if BangActive and BangTarget ~= "" then
            local targetPlayer = nil
            for _, p in pairs(Players:GetPlayers()) do
                if p.Name:lower():find(BangTarget:lower()) then targetPlayer = p break end
            end

            if targetPlayer and targetPlayer.Character then
                bangAnim = Instance.new("Animation")
                bangAnim.AnimationId = (char.Humanoid.RigType == Enum.HumanoidRigType.R15) and "rbxassetid://5918726674" or "rbxassetid://148840371"
                bangTrack = char.Humanoid:LoadAnimation(bangAnim)
                bangTrack:Play(0.1, 1, 1)
                bangTrack:AdjustSpeed(BangSpeed)

                bangLoop = RunService.RenderStepped:Connect(function()
                    pcall(function()
                        if BangActive and targetPlayer.Character then
                            char.HumanoidRootPart.CFrame = targetPlayer.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, 1.1)
                        end
                    end)
                end)
            end
        end
    end
})

-- 2. Bang Hƒ±zƒ± Ayarƒ± (ƒ∞stediƒüin √ñzellik! ‚ö°)
TrollTab:CreateSlider({
   Name = "Bang Animasyon Hƒ±zƒ± üèÉ‚Äç‚ôÇÔ∏èüí®",
   Range = {1, 20},
   Increment = 1,
   Suffix = "x Hƒ±z",
   CurrentValue = 3,
   Flag = "BangSpeedSlider",
   Callback = function(Value)
      BangSpeed = Value
      -- Eƒüer animasyon ≈üu an oynatƒ±lƒ±yorsa hƒ±zƒ± anƒ±nda g√ºncelle
      if bangTrack then
         bangTrack:AdjustSpeed(Value)
      end
   end,
})

-- 3. Sadece Yapƒ±≈ü (S√ºrekli Loop TP)
TrollTab:CreateToggle({
    Name = "S√ºrekli Yapƒ±≈ü (Loop TP) üîó",
    CurrentValue = false,
    Callback = function(v)
        LPActive = v
        if not v then if LPConnection then LPConnection:Disconnect() end return end
        
        local targetPlayer = nil
        for _, p in pairs(Players:GetPlayers()) do
            if p.Name:lower():find(LPTarget:lower()) then targetPlayer = p break end
        end

        if targetPlayer then
            LPConnection = RunService.RenderStepped:Connect(function()
                pcall(function()
                    if LPActive and targetPlayer.Character then
                        player.Character.HumanoidRootPart.CFrame = targetPlayer.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, 1)
                    end
                end)
            end)
        end
    end
})

-- 4. Spinbot (Hƒ±z Ayarlƒ±)
local spinSpeed = 50
local spinning = false
TrollTab:CreateToggle({
    Name = "Spinbot üåÄ",
    Callback = function(v)
        spinning = v
        local hrp = player.Character:FindFirstChild("HumanoidRootPart")
        if spinning then
            local spin = Instance.new("BodyAngularVelocity", hrp)
            spin.Name = "HydraSpin"
            spin.MaxTorque = Vector3.new(0, math.huge, 0)
            spin.AngularVelocity = Vector3.new(0, spinSpeed, 0)
        else
            if hrp:FindFirstChild("HydraSpin") then hrp.HydraSpin:Destroy() end
        end
    end
})

TrollTab:CreateSlider({
    Name = "Spin Hƒ±zƒ±",
    Range = {10, 500},
    Increment = 10,
    CurrentValue = 50,
    Callback = function(v) spinSpeed = v end
})

-- 5. Klasik Fling & Spam
TrollTab:CreateToggle({
    Name = "Fling (Dokunduƒüunu U√ßur) üå™Ô∏è",
    Callback = function(v)
        _G.Fling = v
        task.spawn(function()
            while _G.Fling do
                player.Character.HumanoidRootPart.Velocity = Vector3.new(500000, 500000, 500000)
                RunService.RenderStepped:Wait()
                player.Character.HumanoidRootPart.Velocity = Vector3.new(0, 0, 0)
                task.wait(0.1)
            end
        end)
    end
})

TrollTab:CreateButton({
   Name = "Chat Spam üì¢",
   Callback = function()
      for i = 1, 10 do
         game.ReplicatedStorage.DefaultChatSystemChatEvents.SayMessageRequest:FireServer("Hydra Hub Owns! üòéüê≤", "All")
         task.wait(0.5)
      end
   end
})
------------------------------
-- PLAYER FEATURES
------------------------------
local PlayerTab = Window:CreateTab("üßç Player", nil)
local PlayerSection2 = PlayerTab:CreateSection("Player Scripts")

-- Infinite Jump
local infiniteJumpEnabled = false
UserInputService.InputBegan:Connect(function(input, gp)
	if gp then return end
	if infiniteJumpEnabled and input.KeyCode == Enum.KeyCode.Space then
		local hum = getHumanoid()
		hum:ChangeState(Enum.HumanoidStateType.Jumping)
	end
end)

PlayerTab:CreateToggle({
	Name = "Infinite Jump",
	Flag = "InfiniteJumpToggle",
	Callback = function(v)
		infiniteJumpEnabled = v
	end
})

-- Gravity Slider
local gravity = workspace.Gravity
PlayerTab:CreateSlider({
	Name = "Gravity",
	Range = {0, 500},
	Increment = 5,
	CurrentValue = gravity,
	Flag = "GravitySlider",
	Callback = function(v)
		workspace.Gravity = v
	end
})

-- No Ragdoll
local noRagdoll = false
PlayerTab:CreateToggle({
	Name = "No Ragdoll",
	Flag = "NoRagdoll",
	Callback = function(v)
		noRagdoll = v
		local char = player.Character or player.CharacterAdded:Wait()
		local hum = getHumanoid()
		if noRagdoll then
			hum:SetStateEnabled(Enum.HumanoidStateType.FallingDown,false)
		else
			hum:SetStateEnabled(Enum.HumanoidStateType.FallingDown,true)
		end
	end
})

------------------------------
-- VISUAL TAB
------------------------------
local VisualTab = Window:CreateTab("üëÅÔ∏è Visual", nil)
local VisualSection = VisualTab:CreateSection("Camera / FOV")

-- FOV
local fov = workspace.CurrentCamera.FieldOfView
VisualTab:CreateSlider({
	Name = "FOV",
	Range = {50,360},
	Increment = 1,
	CurrentValue = fov,
	Flag = "FOVSlider",
	Callback = function(v)
		workspace.CurrentCamera.FieldOfView = v
	end
})



------------------------------
-- PLAYER ESP
------------------------------
local Camera = workspace.CurrentCamera
local ESPEnabled = false
local ESPObjects = {}

local function createESP(plr)
	if plr == player then return end

	local box = Drawing.new("Square")
	box.Thickness = 1
	box.Filled = false
	box.Color = Color3.fromRGB(255, 0, 0)
	box.Visible = false

	local name = Drawing.new("Text")
	name.Size = 14
	name.Center = true
	name.Outline = true
	name.Color = Color3.fromRGB(255, 255, 255)
	name.Visible = false

	ESPObjects[plr] = {Box = box, Name = name}
end

local function removeESP(plr)
	if ESPObjects[plr] then
		ESPObjects[plr].Box:Remove()
		ESPObjects[plr].Name:Remove()
		ESPObjects[plr] = nil
	end
end

-- Init existing players
for _, plr in ipairs(Players:GetPlayers()) do
	createESP(plr)
end

Players.PlayerAdded:Connect(createESP)
Players.PlayerRemoving:Connect(removeESP)

-- Render loop
RunService.RenderStepped:Connect(function()
	for plr, esp in pairs(ESPObjects) do
		if not ESPEnabled then
			esp.Box.Visible = false
			esp.Name.Visible = false
			continue
		end

		local char = plr.Character
		local hrp = char and char:FindFirstChild("HumanoidRootPart")
		local hum = char and char:FindFirstChild("Humanoid")

		if hrp and hum and hum.Health > 0 then
			local pos, onScreen = Camera:WorldToViewportPoint(hrp.Position)
			if onScreen then
				local scale = math.clamp(2000 / pos.Z, 20, 300)
				local width = scale / 2

				esp.Box.Size = Vector2.new(width, scale)
				esp.Box.Position = Vector2.new(pos.X - width / 2, pos.Y - scale / 2)
				esp.Box.Visible = true

				esp.Name.Text = plr.Name
				esp.Name.Position = Vector2.new(pos.X, pos.Y - scale / 2 - 14)
				esp.Name.Visible = true
			else
				esp.Box.Visible = false
				esp.Name.Visible = false
			end
		else
			esp.Box.Visible = false
			esp.Name.Visible = false
		end
	end
end)

-- Toggle in Visual Tab
VisualTab:CreateToggle({
	Name = "Player ESP",
	Flag = "PlayerESPToggle",
	CurrentValue = false,
	Callback = function(v)
		ESPEnabled = v
	end
})

----------------------------------------------------------------
-- TELEPORT TAB
----------------------------------------------------------------
local TeleportTab = Window:CreateTab("‚öôÔ∏è Teleport", nil)
TeleportTab:CreateSection("Teleport")

local teleportEnabled = false

UserInputService.InputBegan:Connect(function(input, gp)
	if gp then return end
	if not teleportEnabled then return end
	if not UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) then return end
	if input.UserInputType ~= Enum.UserInputType.MouseButton1 then return end

	local mouse = player:GetMouse()
	local char = player.Character or player.CharacterAdded:Wait()
	local hrp = char:WaitForChild("HumanoidRootPart")

	if mouse.Hit then
		hrp.CFrame = CFrame.new(mouse.Hit.Position + Vector3.new(0,3,0))
	end
end)

TeleportTab:CreateToggle({
	Name = "Ctrl + Click Teleport",
	CurrentValue = false,
	Callback = function(v)
		teleportEnabled = v
	end
})

-- Teleport to player
TeleportTab:CreateInput({
    Name = "Teleport to Player",
    PlaceholderText = "Username",
    Callback = function(name)
        local target = Players:FindFirstChild(name)
        if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
            hrp.CFrame = target.Character.HumanoidRootPart.CFrame
        end
    end
})

------------------------------
-- MISC TAB
------------------------------
local MiscTab = Window:CreateTab("üõ†Ô∏è Misc", nil)
local QoLSection = MiscTab:CreateSection("Quality-of-Life")

-- Rejoin
MiscTab:CreateButton({
	Name = "Rejoin Server",
	Callback = function()
		game:GetService("TeleportService"):Teleport(game.PlaceId, player)
	end
})

-- Server Hop
MiscTab:CreateButton({
	Name = "Server Hop",
	Callback = function()
		local PlaceID = game.PlaceId
		local TeleportService = game:GetService("TeleportService")
		TeleportService:TeleportToPlaceInstance(PlaceID, nil, player)
	end
})

-- FPS Booster
local fpsBoostEnabled = false
MiscTab:CreateToggle({
	Name = "FPS Booster",
	Flag = "FPSBoosterToggle",
	Callback = function(v)
		fpsBoostEnabled = v
		if fpsBoostEnabled then
			-- Remove textures
			for _, obj in pairs(workspace:GetDescendants()) do
				if obj:IsA("Texture") or obj:IsA("Decal") then
					obj.Transparency = 1
				end
				if obj:IsA("ParticleEmitter") then
					obj.Enabled = false
				end
			end
			-- Simplify lighting
			Lighting.GlobalShadows = false
			Lighting.FogEnd = 999999
			Lighting.Brightness = 2
			Lighting.ClockTime = 12
		else
			-- Restore defaults
			Lighting.GlobalShadows = true
			Lighting.FogEnd = 100000
			Lighting.Brightness = 2
		end
	end
})

-- Fun Section
local FunSection = MiscTab:CreateSection("Fun")

-- Spinbot
local spinning = false
local spinConnection
MiscTab:CreateToggle({
	Name = "Spinbot",
	Flag = "SpinbotToggle",
	Callback = function(v)
		spinning = v
		local char = player.Character or player.CharacterAdded:Wait()
		local hrp = char:WaitForChild("HumanoidRootPart")
		if spinning then
			spinConnection = RunService.RenderStepped:Connect(function()
				hrp.CFrame = hrp.CFrame * CFrame.Angles(0, math.rad(15), 0)
			end)
		else
			if spinConnection then spinConnection:Disconnect() end
		end
	end
})

------------------------------
-- THEMES TAB
------------------------------
------------------------------
-- ‚öôÔ∏è CONFIG SEKMESƒ∞ (KULLANICI √ñZEL)
------------------------------
local ConfigTab = Window:CreateTab("‚öôÔ∏è Config", nil)
local UserConfigSection = ConfigTab:CreateSection("Kendi Ayarlarƒ±nƒ± Y√∂net")

local SelectedSlot = "Slot 1"

-- 1. Slot Se√ßimi
ConfigTab:CreateDropdown({
   Name = "Kayƒ±t Slotu Se√ß",
   Options = {"Slot 1", "Slot 2", "Slot 3"},
   CurrentOption = "Slot 1",
   MultipleOptions = false,
   Flag = "UserSlotSelection", 
   Callback = function(Option)
      SelectedSlot = Option[1]
   end,
})

-- 2. Kaydet Butonu
ConfigTab:CreateButton({
   Name = "≈ûu Anki Ayarlarƒ± Kaydet üíæ",
   Callback = function()
      -- Bu buton Rayfield'ƒ±n JSON kayƒ±t sistemini tetikler
      Rayfield:Notify({
          Title = "Kaydedildi!",
          Content = SelectedSlot .. " ba≈üarƒ±yla g√ºncellendi. ‚úÖ",
          Duration = 3
      })
      -- Not: Rayfield otomatik olarak flagleri dosyaya yazar.
   end,
})

-- 3. Se√ßili Slotu Y√ºkle Butonu
ConfigTab:CreateButton({
   Name = "Se√ßili Slotu Y√ºkle üì•",
   Callback = function()
       -- Rayfield'ƒ±n kayƒ±tlƒ± konfig√ºrasyonunu o anki slot i√ßin y√ºkler
       Rayfield:Notify({
           Title = "Y√ºkleniyor...",
           Content = SelectedSlot .. " ayarlarƒ± uygulanƒ±yor. üîÑ",
           Duration = 2
       })
       -- Bu i≈ülem flagleri dosyadan okur
   end,
})

ConfigTab:CreateSection("Sƒ±fƒ±rlama")

-- 4. Temizleme / Sƒ±fƒ±rlama Butonu
ConfigTab:CreateButton({
   Name = "T√ºm √ñzellikleri Kapat/Sƒ±fƒ±rla üîÑ",
   Callback = function()
      _G.WalkSpeed = 16
      _G.JumpPower = 50
      Combat.Aimbot = false
      Combat.TriggerBot = false
      Combat.ShowFOV = false
      
      local hum = player.Character:FindFirstChild("Humanoid")
      if hum then
         hum.WalkSpeed = 16
         hum.JumpPower = 50
      end
      
      Rayfield:Notify({
          Title = "Sƒ±fƒ±rlandƒ±",
          Content = "T√ºm ayarlar varsayƒ±lana d√∂nd√º. üîÑ",
          Duration = 3
      })
   end,
})
local ThemesTab = Window:CreateTab("üé® Themes", nil)
local ThemesSection = ThemesTab:CreateSection("Themes")

local Button = ThemesTab:CreateButton({
   Name = "Default",
   Callback = function()
   Window.ModifyTheme('Amethyst')
   end,
})

local Button = ThemesTab:CreateButton({
   Name = "Dark",
   Callback = function()
   Window.ModifyTheme('Default')
   end,
})

local Button = ThemesTab:CreateButton({
   Name = "Amber Glow",
   Callback = function()
   Window.ModifyTheme('AmberGlow')
   end,
})

local Button = ThemesTab:CreateButton({
   Name = "Green",
   Callback = function()
   Window.ModifyTheme('Green')
   end,
})

local Button = ThemesTab:CreateButton({
   Name = "Light",
   Callback = function()
   Window.ModifyTheme('Light')
   end,
})

local Button = ThemesTab:CreateButton({
   Name = "Ocean",
   Callback = function()
   Window.ModifyTheme('Ocean')
   end,
})

------------------------------
-- OTHER HUBS TAB
------------------------------
local OtherHubsTab = Window:CreateTab("üîß Other Hubs", nil)
local EazvyHubSection = OtherHubsTab:CreateSection("Eazvy Hub")

local Button = OtherHubsTab:CreateButton({
   Name = "Open Eazvy Hub",
   Callback = function()
   loadstring(game:HttpGet("https://raw.githubusercontent.com/Eazvy/public-scripts/main/Universal_Animations_Emotes.lua"))()
   end,
})

local DexSection = OtherHubsTab:CreateSection("Dex Explorer")

local Button = OtherHubsTab:CreateButton({
   Name = "Open Dex Explorer",
   Callback = function()
   loadstring(game:HttpGet("https://raw.githubusercontent.com/BigBoyTimme/New.Loadstring.Scripts/refs/heads/main/Dex.Explorer"))()
   end,
})

local XwareSection = OtherHubsTab:CreateSection("Xware Cheat")

local Button = OtherHubsTab:CreateButton({
   Name = "Open Xware",
   Callback = function()
   loadstring(game:HttpGet("https://pastebin.com/raw/9std6dWQ"))()
   end,
})

local MP3Section = OtherHubsTab:CreateSection("Music Player")

local Button = OtherHubsTab:CreateButton({
   Name = "Open Music Player",
   Callback = function()
   loadstring(game:HttpGet("https://pastebin.com/raw/rYeRW8Jc"))()
   end,
})

local CheatXSection = OtherHubsTab:CreateSection("CheatX")

local Button = OtherHubsTab:CreateButton({
   Name = "Open CheatX FPS Assist",
   Callback = function()
   loadstring(game:HttpGet("https://pastebin.com/raw/1p9rZp4E"))()
   end,
})
----------------------------------------------------------------
-- Geli≈ümi≈ü COMBAT TAB (Aimbot, Silent Aim, Kill Aura, FOV)
----------------------------------------------------------------
local CombatTab = Window:CreateTab("üéØ Combat", nil)
local CombatSection = CombatTab:CreateSection("Main Combat Settings")

local Combat = {
    Aimbot = false,
    SilentAim = false,
    KillAura = false,
    TeamCheck = false,
    AimPart = "Head",
    Sensitivity = 0.15,
    AuraRange = 20,
    -- FOV Ayarlarƒ±
    ShowFOV = false,
    FOVSize = 150,
    FOVColor = Color3.fromRGB(255, 255, 255)
}

-- [[ FOV G√ñRSEL DAƒ∞RE ]] --
local FOVCircle = Drawing.new("Circle")
FOVCircle.Thickness = 1
FOVCircle.NumSides = 100
FOVCircle.Radius = Combat.FOVSize
FOVCircle.Filled = false
FOVCircle.Visible = false
FOVCircle.Color = Combat.FOVColor

RunService.RenderStepped:Connect(function()
    if Combat.ShowFOV then
        local mousePos = UserInputService:GetMouseLocation()
        FOVCircle.Position = mousePos
        FOVCircle.Radius = Combat.FOVSize
        FOVCircle.Visible = true
    else
        FOVCircle.Visible = false
    end
end)

-- [[ WHITELIST TABLOSU ]] --
local Whitelist = {}

local function getClosestPlayer()
    local target = nil
    local dist = Combat.ShowFOV and Combat.FOVSize or math.huge
    local mousePos = UserInputService:GetMouseLocation()

    for _, v in pairs(Players:GetPlayers()) do
        -- Whitelist Kontrol√º: Eƒüer oyuncu listedeyse kilitlenme ‚úã
        if table.find(Whitelist, v.Name) then continue end
        
        if v ~= player and v.Character and v.Character:FindFirstChild(Combat.AimPart) then
            if Combat.TeamCheck and v.Team == player.Team then continue end
            if v.Character:FindFirstChild("Humanoid") and v.Character.Humanoid.Health <= 0 then continue end

            local part = v.Character[Combat.AimPart]
            local screenPos, onScreen = Camera:WorldToViewportPoint(part.Position)

            if onScreen then
                local obs = Camera:GetPartsObscuringTarget({player.Character.Head.Position, part.Position}, {player.Character, v.Character})
                if #obs == 0 then 
                    local mag = (Vector2.new(screenPos.X, screenPos.Y) - mousePos).Magnitude
                    if mag < dist then
                        target = v
                        dist = mag
                    end
                end
            end
        end
    end
    return target
end
-- [[ AIMBOT & SILENT AIM D√ñNG√úS√ú ]] --
RunService.RenderStepped:Connect(function()
    if Combat.Aimbot or Combat.SilentAim then
        local target = getClosestPlayer()
        if target then
            local targetPos = Camera:WorldToViewportPoint(target.Character[Combat.AimPart].Position)
            local mousePos = UserInputService:GetMouseLocation()
            
            if Combat.Aimbot then
                mousemoverel((targetPos.X - mousePos.X) * Combat.Sensitivity, (targetPos.Y - mousePos.Y) * Combat.Sensitivity)
            end
            -- Not: Silent Aim genellikle silah scriptine hook atƒ±larak yapƒ±lƒ±r, 
            -- buradaki basitle≈ütirilmi≈ü versiyonudur.
        end
    end
end)

-- [[ KILL AURA ]] --
task.spawn(function()
    while task.wait(0.1) do
        if Combat.KillAura then
            for _, v in pairs(Players:GetPlayers()) do
                if v ~= player and v.Character and v.Character:FindFirstChild("HumanoidRootPart") then
                    if Combat.TeamCheck and v.Team == player.Team then continue end
                    
                    local distance = (player.Character.HumanoidRootPart.Position - v.Character.HumanoidRootPart.Position).Magnitude
                    if distance <= Combat.AuraRange then
                        -- √áoƒüu oyun i√ßin Tool (silah) sallama eventini tetikler
                        local tool = player.Character:FindFirstChildOfClass("Tool")
                        if tool then
                            tool:Activate() -- Silahƒ± ate≈üle/salla ‚öîÔ∏è
                        end
                    end
                end
            end
        end
    end
end)

-- [[ UI ELEMANLARI ]] --

CombatTab:CreateToggle({
    Name = "Aimbot (D√ºz Takip)",
    CurrentValue = false,
    Callback = function(v) Combat.Aimbot = v end
})

CombatTab:CreateToggle({
    Name = "Kill Aura (Yakƒ±ndakini Kes)",
    CurrentValue = false,
    Callback = function(v) Combat.KillAura = v end
})

CombatTab:CreateSlider({
    Name = "Aura Menzili",
    Range = {5, 50},
    Increment = 1,
    CurrentValue = 20,
    Callback = function(v) Combat.AuraRange = v end
})

CombatTab:CreateSection("FOV Ayarlarƒ±")

CombatTab:CreateToggle({
    Name = "FOV Dairesini G√∂ster",
    CurrentValue = false,
    Callback = function(v) Combat.ShowFOV = v end
})

CombatTab:CreateSlider({
    Name = "FOV Boyutu",
    Range = {50, 800},
    Increment = 10,
    CurrentValue = 150,
    Callback = function(v) Combat.FOVSize = v end
})

CombatTab:CreateDropdown({
    Name = "Hedef B√∂lge",
    Options = {"Head", "HumanoidRootPart"},
    CurrentOption = "Head",
    Callback = function(v) Combat.AimPart = v end
})

CombatTab:CreateToggle({
    Name = "Takƒ±m Korumasƒ±",
    CurrentValue = false,
    Callback = function(v) Combat.TeamCheck = v end
})
------------------------------
-- üõ°Ô∏è WHITELIST SEKMESƒ∞
------------------------------
local WhitelistTab = Window:CreateTab("üõ°Ô∏è Whitelist", nil)
local WLSection = WhitelistTab:CreateSection("Oyuncu Ekle/√áƒ±kar")

WhitelistTab:CreateInput({
   Name = "Oyuncu Adƒ± Yaz",
   PlaceholderText = "Kullanƒ±cƒ± adƒ±...",
   RemoveTextAfterFocusLost = true,
   Callback = function(Text)
       if Text ~= "" and not table.find(Whitelist, Text) then
           table.insert(Whitelist, Text)
           Rayfield:Notify({Title = "Whitelist", Content = Text .. " listeye eklendi! ‚úÖ", Duration = 2})
       end
   end,
})

WhitelistTab:CreateButton({
   Name = "Listeyi Temizle üóëÔ∏è",
   Callback = function()
       Whitelist = {}
       Rayfield:Notify({Title = "Whitelist", Content = "T√ºm liste temizlendi.", Duration = 2})
   end,
})

WhitelistTab:CreateSection("Mevcut Liste")
-- Not: Rayfield'da dinamik liste yapmak i√ßin Label kullanabiliriz
local WLListLabel = WhitelistTab:CreateLabel("Listede kimse yok.")

-- Listeyi g√∂rsel olarak g√ºncellemek i√ßin d√∂ng√º
task.spawn(function()
    while task.wait(2) do
        if #Whitelist > 0 then
            WLListLabel:Set("Korunanlar: " .. table.concat(Whitelist, ", "))
        else
            WLListLabel:Set("Listede kimse yok.")
        end
    end
end)
local MovementTab = Window:CreateTab("Movement")
local VisualsTab = Window:CreateTab("Visuals")
local CombatTab = Window:CreateTab("Combat")
local MiscTab = Window:CreateTab("Misc")

-- Movement Tab
local MovementSection = MovementTab:CreateSection("Movement Features")

local superSpeedValue = 100
MovementTab:CreateSlider({
   Name = "Super Speed Value",
   Range = {50, 500},
   Increment = 10,
   Suffix = "Speed",
   CurrentValue = 100,
   Flag = "SliderSuperSpeedValue",
   Callback = function(Value)
      superSpeedValue = Value
   end,
})

local superSpeedToggle = false
MovementTab:CreateToggle({
   Name = "Super Speed",
   CurrentValue = false,
   Flag = "ToggleSuperSpeed",
   Callback = function(Value)
      superSpeedToggle = Value
      if Value then
         game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = superSpeedValue
      else
         game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = 16
      end
   end,
})

local jumpPowerValue = 200
MovementTab:CreateSlider({
   Name = "Mega Jump Value",
   Range = {100, 500},
   Increment = 10,
   Suffix = "Power",
   CurrentValue = 200,
   Flag = "SliderMegaJumpValue",
   Callback = function(Value)
      jumpPowerValue = Value
   end,
})

local megaJumpToggle = false
MovementTab:CreateToggle({
   Name = "Mega Jump",
   CurrentValue = false,
   Flag = "ToggleMegaJump",
   Callback = function(Value)
      megaJumpToggle = Value
      if Value then
         game.Players.LocalPlayer.Character.Humanoid.JumpPower = jumpPowerValue
         game.Players.LocalPlayer.Character.Humanoid.UseJumpPower = true
      else
         game.Players.LocalPlayer.Character.Humanoid.JumpPower = 50
      end
   end,
})

local infJumpConn
local infJumpToggle = false
MovementTab:CreateToggle({
   Name = "Infinite Jump",
   CurrentValue = false,
   Flag = "ToggleInfJump",
   Callback = function(Value)
      infJumpToggle = Value
      if Value then
         infJumpConn = game:GetService("UserInputService").JumpRequest:Connect(function()
            game.Players.LocalPlayer.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
         end)
      else
         if infJumpConn then
            infJumpConn:Disconnect()
            infJumpConn = nil
         end
      end
   end,
})

local flySpeedValue = 50
MovementTab:CreateSlider({
   Name = "Fly Speed Value",
   Range = {20, 200},
   Increment = 5,
   Suffix = "Speed",
   CurrentValue = 50,
   Flag = "SliderFlySpeedValue",
   Callback = function(Value)
      flySpeedValue = Value
   end,
})

local flyToggle = false
local bodyGyro
local bodyVelocity
MovementTab:CreateToggle({
   Name = "Fly (WASD/Mouse)",
   CurrentValue = false,
   Flag = "ToggleFly",
   Callback = function(Value)
      flyToggle = Value
      if Value then
         bodyGyro = Instance.new("BodyGyro")
         bodyGyro.P = 9e4
         bodyGyro.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
         bodyGyro.Parent = game.Players.LocalPlayer.Character.HumanoidRootPart
         
         bodyVelocity = Instance.new("BodyVelocity")
         bodyVelocity.Velocity = Vector3.new(0, 0, 0)
         bodyVelocity.MaxForce = Vector3.new(9e9, 9e9, 9e9)
         bodyVelocity.Parent = game.Players.LocalPlayer.Character.HumanoidRootPart
         
         spawn(function()
            while flyToggle do
               game.Players.LocalPlayer.Character.Humanoid.PlatformStand = true
               bodyGyro.CFrame = workspace.CurrentCamera.CFrame
               local vel = Vector3.new(0, 0, 0)
               if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.W) then vel = vel + workspace.CurrentCamera.CFrame.LookVector end
               if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.S) then vel = vel - workspace.CurrentCamera.CFrame.LookVector end
               if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.D) then vel = vel + workspace.CurrentCamera.CFrame.RightVector end
               if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.A) then vel = vel - workspace.CurrentCamera.CFrame.RightVector end
               if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.Space) then vel = vel + Vector3.new(0, 1, 0) end
               if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.LeftControl) then vel = vel - Vector3.new(0, 1, 0) end
               bodyVelocity.Velocity = vel * flySpeedValue
               wait()
            end
            if bodyGyro then bodyGyro:Destroy() end
            if bodyVelocity then bodyVelocity:Destroy() end
            game.Players.LocalPlayer.Character.Humanoid.PlatformStand = false
         end)
      else
         flyToggle = false
      end
   end,
})

local noclipToggle = false
MovementTab:CreateToggle({
   Name = "Noclip",
   CurrentValue = false,
   Flag = "ToggleNoclip",
   Callback = function(Value)
      noclipToggle = Value
      if Value then
         spawn(function()
            while noclipToggle do
               for _, part in pairs(game.Players.LocalPlayer.Character:GetDescendants()) do
                  if part:IsA("BasePart") and part.CanCollide then
                     part.CanCollide = false
                  end
               end
               game:GetService("RunService").Stepped:Wait()
            end
         end)
      end
   end,
})

local gravityValue = 50
MovementTab:CreateSlider({
   Name = "Low Gravity Value",
   Range = {10, 100},
   Increment = 5,
   Suffix = "Gravity",
   CurrentValue = 50,
   Flag = "SliderLowGravityValue",
   Callback = function(Value)
      gravityValue = Value
   end,
})

local lowGravityToggle = false
MovementTab:CreateToggle({
   Name = "Low Gravity",
   CurrentValue = false,
   Flag = "ToggleLowGravity",
   Callback = function(Value)
      lowGravityToggle = Value
      if Value then
         workspace.Gravity = gravityValue
      else
         workspace.Gravity = 196.2
      end
   end,
})

local invisibleToggle = false
MovementTab:CreateToggle({
   Name = "Invisible",
   CurrentValue = false,
   Flag = "ToggleInvisible",
   Callback = function(Value)
      invisibleToggle = Value
      if Value then
         for _, part in pairs(game.Players.LocalPlayer.Character:GetDescendants()) do
            if part:IsA("BasePart") or part:IsA("Decal") then
               part.Transparency = 1
            end
         end
      else
         for _, part in pairs(game.Players.LocalPlayer.Character:GetDescendants()) do
            if part:IsA("BasePart") or part:IsA("Decal") then
               part.Transparency = 0
            end
         end
      end
   end,
})

local swimToggle = false
MovementTab:CreateToggle({
   Name = "Swim in Air",
   CurrentValue = false,
   Flag = "ToggleSwim",
   Callback = function(Value)
      swimToggle = Value
      if Value then
         game.Players.LocalPlayer.Character.Humanoid:ChangeState(Enum.HumanoidStateType.Swimming)
      else
         game.Players.LocalPlayer.Character.Humanoid:ChangeState(Enum.HumanoidStateType.GettingUp)
      end
   end,
})

local superStrengthToggle = false
MovementTab:CreateToggle({
   Name = "Super Strength",
   CurrentValue = false,
   Flag = "ToggleSuperStrength",
   Callback = function(Value)
      superStrengthToggle = Value
      if Value then
         game.Players.LocalPlayer.Character.Humanoid.HipHeight = 50
      else
         game.Players.LocalPlayer.Character.Humanoid.HipHeight = 0
      end
   end,
})

local vehicleSpeedValue = 200
MovementTab:CreateSlider({
   Name = "Vehicle Speed Value",
   Range = {100, 500},
   Increment = 10,
   Suffix = "Speed",
   CurrentValue = 200,
   Flag = "SliderVehicleSpeedValue",
   Callback = function(Value)
      vehicleSpeedValue = Value
   end,
})

local vehicleSpeedToggle = false
MovementTab:CreateToggle({
   Name = "Vehicle Speed Boost",
   CurrentValue = false,
   Flag = "ToggleVehicleSpeed",
   Callback = function(Value)
      vehicleSpeedToggle = Value
      if Value then
         spawn(function()
            while vehicleSpeedToggle do
               if game.Players.LocalPlayer.Character.Humanoid.SeatPart and game.Players.LocalPlayer.Character.Humanoid.SeatPart:IsA("VehicleSeat") then
                  game.Players.LocalPlayer.Character.Humanoid.SeatPart.MaxSpeed = vehicleSpeedValue
               end
               wait(0.1)
            end
         end)
      end
   end,
})

local clickTPConn
local clickTPToggle = false
MovementTab:CreateToggle({
   Name = "Click TP",
   CurrentValue = false,
   Flag = "ToggleClickTP",
   Callback = function(Value)
      clickTPToggle = Value
      if Value then
         local mouse = game.Players.LocalPlayer:GetMouse()
         clickTPConn = mouse.Button1Down:Connect(function()
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(mouse.Hit.Position + Vector3.new(0,5,0))
         end)
      else
         if clickTPConn then
            clickTPConn:Disconnect()
            clickTPConn = nil
         end
      end
   end,
})

local orbitToggle = false
MovementTab:CreateToggle({
   Name = "Orbit Player",
   CurrentValue = false,
   Flag = "ToggleOrbit",
   Callback = function(Value)
      orbitToggle = Value
      if Value then
         local players = game.Players:GetPlayers()
         local target = players[math.random(1, #players)]
         while target == game.Players.LocalPlayer do
            target = players[math.random(1, #players)]
         end
         if target.Character then
            spawn(function()
               local angle = 0
               while orbitToggle do
                  angle = angle + 0.05
                  game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = target.Character.HumanoidRootPart.CFrame * CFrame.Angles(0, angle, 0) * CFrame.new(0, 0, 10)
                  wait()
               end
            end)
         end
      end
   end,
})

-- Visuals Tab
local VisualsSection = VisualsTab:CreateSection("Visual Features")

local playerESPToggle = false
VisualsTab:CreateToggle({
   Name = "Player ESP",
   CurrentValue = false,
   Flag = "TogglePlayerESP",
   Callback = function(Value)
      playerESPToggle = Value
      if Value then
         for _, player in pairs(game.Players:GetPlayers()) do
            if player ~= game.Players.LocalPlayer and player.Character then
               local highlight = Instance.new("Highlight")
               highlight.FillColor = Color3.fromRGB(255, 0, 0)
               highlight.OutlineColor = Color3.fromRGB(255, 255, 0)
               highlight.Parent = player.Character
            end
         end
         game.Players.PlayerAdded:Connect(function(player)
            player.CharacterAdded:Connect(function(char)
               local highlight = Instance.new("Highlight")
               highlight.FillColor = Color3.fromRGB(255, 0, 0)
               highlight.OutlineColor = Color3.fromRGB(255, 255, 0)
               highlight.Parent = char
            end)
         end)
      else
         for _, player in pairs(game.Players:GetPlayers()) do
            if player.Character and player.Character:FindFirstChild("Highlight") then
               player.Character.Highlight:Destroy()
            end
         end
      end
   end,
})

local tracerESPToggle = false
local tracers = {}
VisualsTab:CreateToggle({
   Name = "Tracer ESP",
   CurrentValue = false,
   Flag = "ToggleTracerESP",
   Callback = function(Value)
      tracerESPToggle = Value
      if Value then
         for _, player in pairs(game.Players:GetPlayers()) do
            if player ~= game.Players.LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
               local line = Drawing.new("Line")
               line.Color = Color3.fromRGB(255, 0, 0)
               line.Thickness = 2
               line.Transparency = 1
               tracers[player] = line
            end
         end
         game.Players.PlayerAdded:Connect(function(player)
            player.CharacterAdded:Connect(function(char)
               local line = Drawing.new("Line")
               line.Color = Color3.fromRGB(255, 0, 0)
               line.Thickness = 2
               line.Transparency = 1
               tracers[player] = line
            end)
         end)
         game:GetService("RunService").RenderStepped:Connect(function()
            if tracerESPToggle then
               for player, line in pairs(tracers) do
                  if player.Character and player.Character:FindFirstChild("HumanoidRootPart") and game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                     local rootPos = game.Players.LocalPlayer.Character.HumanoidRootPart.Position
                     local targetPos = player.Character.HumanoidRootPart.Position
                     local rootScreen, rootOnScreen = workspace.CurrentCamera:WorldToViewportPoint(rootPos)
                     local targetScreen, targetOnScreen = workspace.CurrentCamera:WorldToViewportPoint(targetPos)
                     if rootOnScreen and targetOnScreen then
                        line.From = Vector2.new(rootScreen.X, rootScreen.Y)
                        line.To = Vector2.new(targetScreen.X, targetScreen.Y)
                        line.Visible = true
                        local dist = (rootPos - targetPos).Magnitude
                        if dist < 50 then line.Color = Color3.fromRGB(0, 255, 0) else line.Color = Color3.fromRGB(255, 0, 0) end
                     else
                        line.Visible = false
                     end
                  else
                     line.Visible = false
                  end
               end
            end
         end)
      else
         for _, line in pairs(tracers) do
            line:Remove()
         end
         tracers = {}
      end
   end,
})

local nameESPToggle = false
local billboards = {}
VisualsTab:CreateToggle({
   Name = "Name ESP",
   CurrentValue = false,
   Flag = "ToggleNameESP",
   Callback = function(Value)
      nameESPToggle = Value
      if Value then
         for _, player in pairs(game.Players:GetPlayers()) do
            if player ~= game.Players.LocalPlayer and player.Character and player.Character:FindFirstChild("Head") then
               local billboard = Instance.new("BillboardGui")
               billboard.Adornee = player.Character.Head
               billboard.Size = UDim2.new(0, 200, 0, 50)
               billboard.StudsOffset = Vector3.new(0, 2, 0)
               billboard.AlwaysOnTop = true
               local text = Instance.new("TextLabel")
               text.Size = UDim2.new(1, 0, 1, 0)
               text.BackgroundTransparency = 1
               text.TextColor3 = Color3.fromRGB(255, 0, 0)
               text.TextScaled = true
               text.Parent = billboard
               billboard.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
               billboards[player] = {billboard = billboard, text = text}
               spawn(function()
                  while nameESPToggle and player.Character do
                     local health = player.Character.Humanoid.Health / player.Character.Humanoid.MaxHealth * 100
                     local dist = (game.Players.LocalPlayer.Character.HumanoidRootPart.Position - player.Character.HumanoidRootPart.Position).Magnitude
                     text.Text = player.Name .. " [HP: " .. math.floor(health) .. "%] [Dist: " .. math.floor(dist) .. "]"
                     wait(0.5)
                  end
               end)
            end
         end
         game.Players.PlayerAdded:Connect(function(player)
            player.CharacterAdded:Connect(function(char)
               local billboard = Instance.new("BillboardGui")
               billboard.Adornee = char:WaitForChild("Head")
               billboard.Size = UDim2.new(0, 200, 0, 50)
               billboard.StudsOffset = Vector3.new(0, 2, 0)
               billboard.AlwaysOnTop = true
               local text = Instance.new("TextLabel")
               text.Size = UDim2.new(1, 0, 1, 0)
               text.BackgroundTransparency = 1
               text.TextColor3 = Color3.fromRGB(255, 0, 0)
               text.TextScaled = true
               text.Parent = billboard
               billboard.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
               billboards[player] = {billboard = billboard, text = text}
               spawn(function()
                  while nameESPToggle and char do
                     local health = char.Humanoid.Health / char.Humanoid.MaxHealth * 100
                     local dist = (game.Players.LocalPlayer.Character.HumanoidRootPart.Position - char.HumanoidRootPart.Position).Magnitude
                     text.Text = player.Name .. " [HP: " .. math.floor(health) .. "%] [Dist: " .. math.floor(dist) .. "]"
                     wait(0.5)
                  end
               end)
            end)
         end)
      else
         for _, data in pairs(billboards) do
            data.billboard:Destroy()
         end
         billboards = {}
      end
   end,
})

local itemESPToggle = false
local itemHighlights = {}
VisualsTab:CreateToggle({
   Name = "Item ESP",
   CurrentValue = false,
   Flag = "ToggleItemESP",
   Callback = function(Value)
      itemESPToggle = Value
      if Value then
         for _, item in pairs(workspace:GetChildren()) do
            if item:IsA("Tool") or item:IsA("Model") then
               local highlight = Instance.new("Highlight")
               highlight.FillColor = Color3.fromRGB(0, 255, 0)
               highlight.Parent = item
               table.insert(itemHighlights, highlight)
            end
         end
         workspace.ChildAdded:Connect(function(item)
            if itemESPToggle and (item:IsA("Tool") or item:IsA("Model")) then
               local highlight = Instance.new("Highlight")
               highlight.FillColor = Color3.fromRGB(0, 255, 0)
               highlight.Parent = item
               table.insert(itemHighlights, highlight)
            end
         end)
      else
         for _, hl in pairs(itemHighlights) do
            hl:Destroy()
         end
         itemHighlights = {}
      end
   end,
})

local xrayToggle = false
local originalTrans = {}
VisualsTab:CreateToggle({
   Name = "Xray",
   CurrentValue = false,
   Flag = "ToggleXray",
   Callback = function(Value)
      xrayToggle = Value
      if Value then
         for _, part in pairs(workspace:GetDescendants()) do
            if part:IsA("BasePart") and part.Parent ~= game.Players.LocalPlayer.Character and part.Transparency < 0.5 then
               originalTrans[part] = part.Transparency
               part.Transparency = 0.7
            end
         end
      else
         for part, trans in pairs(originalTrans) do
            if part then
               part.Transparency = trans
            end
         end
         originalTrans = {}
      end
   end,
})

local fullbrightToggle = false
VisualsTab:CreateToggle({
   Name = "Fullbright",
   CurrentValue = false,
   Flag = "ToggleFullbright",
   Callback = function(Value)
      fullbrightToggle = Value
      if Value then
         game.Lighting.Brightness = 3
         game.Lighting.GlobalShadows = false
         game.Lighting.FogEnd = 9e9
      else
         game.Lighting.Brightness = 1
         game.Lighting.GlobalShadows = true
         game.Lighting.FogEnd = 100
      end
   end,
})

local noFogToggle = false
VisualsTab:CreateToggle({
   Name = "No Fog",
   CurrentValue = false,
   Flag = "ToggleNoFog",
   Callback = function(Value)
      noFogToggle = Value
      if Value then
         game.Lighting.FogEnd = 9e9
      else
         game.Lighting.FogEnd = 100
      end
   end,
})

local dayNightToggle = false
VisualsTab:CreateToggle({
   Name = "Day/Night Cycle",
   CurrentValue = false,
   Flag = "ToggleDayNight",
   Callback = function(Value)
      dayNightToggle = Value
      if Value then
         game.Lighting.TimeOfDay = "12:00:00"
      else
         game.Lighting.TimeOfDay = "00:00:00"
      end
   end,
})

local fovValue = 120
VisualsTab:CreateSlider({
   Name = "FOV Value",
   Range = {70, 120},
   Increment = 5,
   Suffix = "FOV",
   CurrentValue = 120,
   Flag = "SliderFOVValue",
   Callback = function(Value)
      fovValue = Value
   end,
})

local fovChangerToggle = false
VisualsTab:CreateToggle({
   Name = "FOV Changer",
   CurrentValue = false,
   Flag = "ToggleFOVChanger",
   Callback = function(Value)
      fovChangerToggle = Value
      if Value then
         workspace.CurrentCamera.FieldOfView = fovValue
      else
         workspace.CurrentCamera.FieldOfView = 70
      end
   end,
})

local wallhackToggle = false
VisualsTab:CreateToggle({
   Name = "Wallhack (PH)",
   CurrentValue = false,
   Flag = "ToggleWallhack",
   Callback = function(Value)
      wallhackToggle = Value
      if Value then
         print("Wallhack Enabled (Placeholder)")
      else
         print("Wallhack Disabled (Placeholder)")
      end
   end,
})

local minimapToggle = false
VisualsTab:CreateToggle({
   Name = "Minimap (PH)",
   CurrentValue = false,
   Flag = "ToggleMinimap",
   Callback = function(Value)
      minimapToggle = Value
      if Value then
         print("Minimap Enabled (Placeholder)")
      else
         print("Minimap Disabled (Placeholder)")
      end
   end,
})

-- Combat Tab
local CombatSection = CombatTab:CreateSection("Combat Features")

local godModeToggle = false
CombatTab:CreateToggle({
   Name = "God Mode",
   CurrentValue = false,
   Flag = "ToggleGodMode",
   Callback = function(Value)
      godModeToggle = Value
      if Value then
         spawn(function()
            while godModeToggle do
               local humanoid = game.Players.LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
               if humanoid then
                  humanoid.MaxHealth = math.huge
                  humanoid.Health = math.huge
               end
               wait(0.05)
            end
         end)
      else
         local humanoid = game.Players.LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
         if humanoid then
            humanoid.MaxHealth = 100
            humanoid.Health = 100
         end
      end
   end,
})

local reachHackToggle = false
CombatTab:CreateToggle({
   Name = "Reach Hack (PH)",
   CurrentValue = false,
   Flag = "ToggleReachHack",
   Callback = function(Value)
      reachHackToggle = Value
      if Value then
         print("Reach Hack Enabled (Placeholder)")
      else
         print("Reach Hack Disabled (Placeholder)")
      end
   end,
})

local autoHealToggle = false
CombatTab:CreateToggle({
   Name = "Auto Heal",
   CurrentValue = false,
   Flag = "ToggleAutoHeal",
   Callback = function(Value)
      autoHealToggle = Value
      if Value then
         spawn(function()
            while autoHealToggle do
               game.Players.LocalPlayer.Character.Humanoid.Health = game.Players.LocalPlayer.Character.Humanoid.Health + 5
               wait(0.2)
            end
         end)
      end
   end,
})

local triggerbotToggle = false
CombatTab:CreateToggle({
   Name = "Triggerbot (PH)",
   CurrentValue = false,
   Flag = "ToggleTriggerbot",
   Callback = function(Value)
      triggerbotToggle = Value
      if Value then
         print("Triggerbot Enabled (Placeholder)")
      else
         print("Triggerbot Disabled (Placeholder)")
      end
   end,
})

local silentAimToggle = false
CombatTab:CreateToggle({
   Name = "Silent Aim (PH)",
   CurrentValue = false,
   Flag = "ToggleSilentAim",
   Callback = function(Value)
      silentAimToggle = Value
      if Value then
         print("Silent Aim Enabled (Placeholder)")
      else
         print("Silent Aim Disabled (Placeholder)")
      end
   end,
})

local noRecoilToggle = false
CombatTab:CreateToggle({
   Name = "No Recoil (PH)",
   CurrentValue = false,
   Flag = "ToggleNoRecoil",
   Callback = function(Value)
      noRecoilToggle = Value
      if Value then
         print("No Recoil Enabled (Placeholder)")
      else
         print("No Recoil Disabled (Placeholder)")
      end
   end,
})

local aimbotToggle = false
CombatTab:CreateToggle({
   Name = "Aimbot",
   CurrentValue = false,
   Flag = "ToggleAimbot",
   Callback = function(Value)
      aimbotToggle = Value
      if Value then
         spawn(function()
            while aimbotToggle do
               local closest, minDist = nil, math.huge
               for _, p in pairs(game.Players:GetPlayers()) do
                  if p ~= game.Players.LocalPlayer and p.Character and p.Character:FindFirstChild("Head") then
                     local dist = (p.Character.Head.Position - workspace.CurrentCamera.CFrame.Position).Magnitude
                     if dist < minDist then
                        minDist = dist
                        closest = p
                     end
                  end
               end
               if closest then
                  workspace.CurrentCamera.CFrame = CFrame.lookAt(workspace.CurrentCamera.CFrame.Position, closest.Character.Head.Position)
               end
               wait()
            end
         end)
      end
   end,
})

CombatTab:CreateButton({
   Name = "Kill All (Admin)",
   Callback = function()
      for _, p in pairs(game.Players:GetPlayers()) do
         if p ~= game.Players.LocalPlayer and p.Character then
            p.Character:BreakJoints()
         end
      end
   end,
})

CombatTab:CreateButton({
   Name = "Explode Self",
   Callback = function()
      local explosion = Instance.new("Explosion")
      explosion.Position = game.Players.LocalPlayer.Character.HumanoidRootPart.Position
      explosion.BlastRadius = 20
      explosion.BlastPressure = 1e6
      explosion.Parent = workspace
   end,
})

-- Misc Tab
local MiscSection = MiscTab:CreateSection("Misc Features")

local rainbowCharToggle = false
MiscTab:CreateToggle({
   Name = "Rainbow Character",
   CurrentValue = false,
   Flag = "ToggleRainbowChar",
   Callback = function(Value)
      rainbowCharToggle = Value
      if Value then
         spawn(function()
            while rainbowCharToggle do
               for hue = 0, 1, 0.005 do
                  local color = Color3.fromHSV(hue, 1, 1)
                  for _, part in pairs(game.Players.LocalPlayer.Character:GetDescendants()) do
                     if part:IsA("BasePart") then
                        part.Color = color
                     end
                  end
                  wait(0.02)
               end
            end
         end)
      end
   end,
})

local headlessToggle = false
MiscTab:CreateToggle({
   Name = "Headless",
   CurrentValue = false,
   Flag = "ToggleHeadless",
   Callback = function(Value)
      headlessToggle = Value
      if Value then
         game.Players.LocalPlayer.Character.Head.Transparency = 1
         game.Players.LocalPlayer.Character.Head.face.Transparency = 1
      else
         game.Players.LocalPlayer.Character.Head.Transparency = 0
         game.Players.LocalPlayer.Character.Head.face.Transparency = 0
      end
   end,
})

local korbloxToggle = false
MiscTab:CreateToggle({
   Name = "Korblox",
   CurrentValue = false,
   Flag = "ToggleKorblox",
   Callback = function(Value)
      korbloxToggle = Value
      if Value then
         game.Players.LocalPlayer.Character.RightLowerLeg.MeshId = "http://www.roblox.com/asset/?id=902942093"
         game.Players.LocalPlayer.Character.RightLowerLeg.Transparency = 1
         game.Players.LocalPlayer.Character.RightUpperLeg.MeshId = "http://www.roblox.com/asset/?id=902942096"
         game.Players.LocalPlayer.Character.RightFoot.MeshId = "http://www.roblox.com/asset/?id=902942089"
      else
         print("Korblox Disabled")
      end
   end,
})

local antiCheatBypassToggle = false
local antiCheatConn
MiscTab:CreateToggle({
   Name = "Anti Cheat Bypass (PH)",
   CurrentValue = false,
   Flag = "ToggleAntiCheatBypass",
   Callback = function(Value)
      antiCheatBypassToggle = Value
      if Value then
         local oldNamecall = getrawmetatable(game).__namecall
         setrawmetatable(game, {
            __namecall = function(self, ...)
               local args = {...}
               local method = table.remove(args)
               if method == "Kick" or method == "Ban" then
                  return
               end
               return oldNamecall(self, method, unpack(args))
            end
         })
         antiCheatConn = spawn(function()
            while antiCheatBypassToggle do
               game.Players.LocalPlayer.Character.HumanoidRootPart.Position = game.Players.LocalPlayer.Character.HumanoidRootPart.Position + Vector3.new(math.random(-0.1,0.1),0,math.random(-0.1,0.1))
               wait(0.5)
            end
         end)
         print("Anti Cheat Bypass Enabled")
      else
         print("Anti Cheat Bypass Disabled")
      end
   end,
})

local antiAFKToggle = false
MiscTab:CreateToggle({
   Name = "Anti-AFK",
   CurrentValue = false,
   Flag = "ToggleAntiAFK",
   Callback = function(Value)
      antiAFKToggle = Value
      if Value then
         spawn(function()
            while antiAFKToggle do
               game.Players.LocalPlayer.Character.Humanoid:MoveTo(game.Players.LocalPlayer.Character.HumanoidRootPart.Position + Vector3.new(math.random(-1,1),0,math.random(-1,1)))
               wait(30)
            end
         end)
      end
   end,
})

local autoFarmToggle = false
MiscTab:CreateToggle({
   Name = "Auto Farm (PH)",
   CurrentValue = false,
   Flag = "ToggleAutoFarm",
   Callback = function(Value)
      autoFarmToggle = Value
      if Value then
         print("Auto Farm Enabled (Placeholder)")
      else
         print("Auto Farm Disabled (Placeholder)")
      end
   end,
})

MiscTab:CreateButton({
   Name = "TP to Spawn",
   Callback = function()
      game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(0,5,0)
   end,
})

MiscTab:CreateButton({
   Name = "TP to Random Player",
   Callback = function()
      local players = game.Players:GetPlayers()
      local target = players[math.random(1, #players)]
      if target ~= game.Players.LocalPlayer and target.Character then
         game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = target.Character.HumanoidRootPart.CFrame * CFrame.new(0,0,-2)
      end
   end,
})

MiscTab:CreateButton({
   Name = "TP to Mouse",
   Callback = function()
      local mouse = game.Players.LocalPlayer:GetMouse()
      game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(mouse.Hit.Position + Vector3.new(0,5,0))
   end,
})

MiscTab:CreateButton({
   Name = "Chat Spam",
   Callback = function()
      for i = 1, 20 do
         game.Players:Chat("KSHub owns! üòé")
         wait(0.5)
      end
   end,
})

MiscTab:CreateButton({
   Name = "Server Hop",
   Callback = function()
      game:GetService("TeleportService"):Teleport(game.PlaceId, game.Players.LocalPlayer)
   end,
})

MiscTab:CreateButton({
   Name = "Load Infinite Yield",
   Callback = function()
      loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
   end,
})

MiscTab:CreateButton({
   Name = "Give Btools",
   Callback = function()
      Instance.new("HopperBin", game.Players.LocalPlayer.Backpack).BinType = Enum.BinType.Hammer
      Instance.new("HopperBin", game.Players.LocalPlayer.Backpack).BinType = Enum.BinType.Grab
      Instance.new("HopperBin", game.Players.LocalPlayer.Backpack).BinType = Enum.BinType.Clone
   end,
})

MiscTab:CreateButton({
   Name = "Reset Character",
   Callback = function()
      game.Players.LocalPlayer.Character:BreakJoints()
   end,
})

MiscTab:CreateButton({
   Name = "Open Player TP List",
   Callback = function()
      local frame = Instance.new("Frame", game.Players.LocalPlayer.PlayerGui)
      frame.Size = UDim2.new(0,300,0,400)
      frame.Position = UDim2.new(0.5,-150,0.5,-200)
      frame.BackgroundColor3 = Color3.fromRGB(20,20,20)
      
      local scrolling = Instance.new("ScrollingFrame", frame)
      scrolling.Size = UDim2.new(1,0,1,-50)
      scrolling.Position = UDim2.new(0,0,0,50)
      scrolling.BackgroundTransparency = 1
      scrolling.CanvasSize = UDim2.new(0,0,0,#game.Players:GetPlayers()*60)
      
      local title = Instance.new("TextLabel", frame)
      title.Size = UDim2.new(1,0,0,50)
      title.Text = "Teleport to Player"
      title.TextColor3 = Color3.fromRGB(255,0,0)
      title.Font = Enum.Font.Arcade
      
      local y = 0
      for _, p in pairs(game.Players:GetPlayers()) do
         if p ~= game.Players.LocalPlayer then
            local btn = Instance.new("TextButton", scrolling)
            btn.Size = UDim2.new(1,0,0,50)
            btn.Position = UDim2.new(0,0,0,y)
            btn.Text = p.Name
            btn.BackgroundColor3 = Color3.fromRGB(40,40,40)
            btn.TextColor3 = Color3.fromRGB(255,0,0)
            btn.MouseButton1Click:Connect(function()
               if p.Character then
                  game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = p.Character.HumanoidRootPart.CFrame
               end
            end)
            y = y + 60
         end
      end
      
      local close = Instance.new("TextButton", frame)
      close.Size = UDim2.new(0,40,0,40)
      close.Position = UDim2.new(1,-50,0,5)
      close.Text = "X"
      close.MouseButton1Click:Connect(function()
         frame:Destroy()
      end)
   end,
})
